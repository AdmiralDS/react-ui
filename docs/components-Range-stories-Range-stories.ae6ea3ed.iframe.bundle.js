"use strict";(self.webpackChunk_admiral_ds_react_ui=self.webpackChunk_admiral_ds_react_ui||[]).push([[211],{"./src/components/Range/stories/Range.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Playground:()=>Playground,__namedExportsOrder:()=>__namedExportsOrder,default:()=>Range_stories});var react=__webpack_require__("./node_modules/react/index.js"),styled_components_browser_esm=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),Range=__webpack_require__("./src/components/Range/index.tsx"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const RangePlaygroundTemplate=args=>{const[rangeValue,setRangeValue]=react.useState([4,5]);return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:(0,jsx_runtime.jsx)(Range.Q,{...args,value:rangeValue,onChange:(e,value)=>{console.log({e,value}),setRangeValue(value)}})})};try{RangePlaygroundTemplate.displayName="RangePlaygroundTemplate",RangePlaygroundTemplate.__docgenInfo={description:"",displayName:"RangePlaygroundTemplate",props:{value:{defaultValue:null,description:"Значение компонента",name:"value",required:!0,type:{name:"NumberRange"}},onChange:{defaultValue:null,description:"Коллбек на изменение состояния",name:"onChange",required:!0,type:{name:"(event: any, value: NumberRange) => void"}},onRangeMouseUp:{defaultValue:null,description:"Колбек, который срабатывает по окончании изменения значения (по окончании перетаскивания ползунка или клика на полосу диапазона)",name:"onRangeMouseUp",required:!1,type:{name:"(() => void)"}},minValue:{defaultValue:null,description:"Минимальное значение",name:"minValue",required:!1,type:{name:"number"}},maxValue:{defaultValue:null,description:"Максимальное значение",name:"maxValue",required:!1,type:{name:"number"}},step:{defaultValue:null,description:"Шаг слайдера. Это либо строка any, либо положительное число, по умолчанию 1.\nЕсли этот параметр не установлен в any, компонент принимает только кратные step значения, в диапазоне minValue - maxValue",name:"step",required:!1,type:{name:'number | "any"'}},disabled:{defaultValue:null,description:"Отключение компонента",name:"disabled",required:!1,type:{name:"boolean"}},dimension:{defaultValue:null,description:"Размер компонента",name:"dimension",required:!1,type:{name:"enum",value:[{value:'"s"'},{value:'"m"'}]}},skeleton:{defaultValue:null,description:"Состояние skeleton",name:"skeleton",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Range/stories/RangePlayground.template.tsx#RangePlaygroundTemplate"]={docgenInfo:RangePlaygroundTemplate.__docgenInfo,name:"RangePlaygroundTemplate",path:"src/components/Range/stories/RangePlayground.template.tsx#RangePlaygroundTemplate"})}catch(__react_docgen_typescript_loader_error){}const Desc=styled_components_browser_esm.Ay.div.withConfig({displayName:"Rangestories__Desc",componentId:"sc-1dm4ez-0"})(["font-family:'VTB Group UI';font-size:16px;line-height:24px;"]),Description=()=>(0,jsx_runtime.jsx)(Desc,{children:"Двойной слайдер позволяет выбирать диапазон внутри обозначенного диапазона значений."});Description.displayName="Description";const Range_stories={title:"Admiral-2.1/Range",decorators:void 0,component:Range.Q,parameters:{componentSubtitle:(0,jsx_runtime.jsx)(Description,{}),design:[{type:"figma",url:"https://www.figma.com/file/EGEGZsx8WhdxpmFKu8J41G/Admiral-2.1-UI-Kit?node-id=39%3A61377"},{type:"figma",url:"https://www.figma.com/file/EGEGZsx8WhdxpmFKu8J41G/Admiral-2.1-UI-Kit?node-id=39%3A61446"},{type:"figma",url:"https://www.figma.com/file/EGEGZsx8WhdxpmFKu8J41G/Admiral-2.1-UI-Kit?node-id=39%3A61513"}]},argTypes:{dimension:{options:["m","s"],control:{type:"radio"}},disabled:{control:{type:"boolean"}},step:{control:{type:"number"}},minValue:{control:{type:"number"}},maxValue:{control:{type:"number"}},skeleton:{control:{type:"boolean"}},value:{control:!1}}},PlaygroundStory=props=>(0,jsx_runtime.jsx)(RangePlaygroundTemplate,{...props});PlaygroundStory.displayName="PlaygroundStory";const Playground={render:PlaygroundStory,parameters:{docs:{source:{code:"import * as React from 'react';\nimport { Range } from '@admiral-ds/react-ui';\nimport type { RangeProps } from '@admiral-ds/react-ui';\n\nexport const RangePlaygroundTemplate = (args: RangeProps) => {\n  const [rangeValue, setRangeValue] = React.useState<[number, number]>([4, 5]);\n\n  return (\n    <>\n      <Range\n        {...args}\n        value={rangeValue}\n        onChange={(e: any, value: [number, number]) => {\n          console.log({ e, value });\n          setRangeValue(value);\n        }}\n      />\n    </>\n  );\n};\n"}}}};Playground.parameters={...Playground.parameters,docs:{...Playground.parameters?.docs,source:{originalSource:"{\n  render: PlaygroundStory,\n  parameters: {\n    docs: {\n      source: {\n        code: PlaygroundRaw\n      }\n    }\n  }\n}",...Playground.parameters?.docs?.source}}};const __namedExportsOrder=["Playground"]},"./src/components/Range/index.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Q:()=>Range});var react=__webpack_require__("./node_modules/react/index.js"),throttle=__webpack_require__("./src/components/common/utils/throttle.ts");const calcValue=(e,trackRef,minValue,maxValue,step)=>{const trackLeft=trackRef.current?.getBoundingClientRect().left||0,trackWidth=trackRef.current?.getBoundingClientRect().width||0;let cursorPosition=e.changedTouches?e.changedTouches[0].pageX:e.pageX;cursorPosition<=trackLeft&&(cursorPosition=trackLeft),cursorPosition>=trackLeft+trackWidth&&(cursorPosition=trackLeft+trackWidth);const newValue=((trackWidth,sliderPosition,minValue,maxValue,step)=>{let sliderValue=sliderPosition*(trackWidth?(maxValue-minValue)/trackWidth:0);"number"==typeof step&&(!step||step>=1)&&(sliderValue=Math.round(sliderValue));let calcValue=minValue+sliderValue;if(step&&"number"==typeof step&&(calcValue=Math.round(calcValue/step)*step,step.toString().includes("."))){const decimal=step.toString().match(/\.(\d+)/)?.[1].length;calcValue=+calcValue.toFixed(decimal)}return minValue+sliderValue===minValue&&calcValue!==minValue?minValue:minValue+sliderValue===maxValue&&calcValue!==maxValue?maxValue:calcValue})(trackWidth,Math.round(cursorPosition-trackLeft),minValue,maxValue,step);return newValue},sortNum=arr=>arr[0]>arr[1]?[arr[1],arr[0]]:[arr[0],arr[1]],arraysEqual=(arr1,arr2)=>arr1.length===arr2.length&&arr1.every(((value,index)=>value===arr2[index])),calcSliderCoords=(value,minValue,maxValue,rangeWidth)=>{let percents=(rangeWidth?rangeWidth/(maxValue-minValue):0)*(value>=0?value-minValue:-minValue+value)/rangeWidth*100;return percents=percents>100?100:percents,percents=percents<0?0:percents,percents};var styled_components_browser_esm=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),animation=__webpack_require__("./src/components/skeleton/animation.tsx");const Wrapper=styled_components_browser_esm.Ay.div.withConfig({displayName:"style__Wrapper",componentId:"sc-14flfup-0"})(["position:relative;-webkit-tap-highlight-color:transparent;"]),skeletonMixin=(0,styled_components_browser_esm.AH)(["",";pointer-events:none;& > *{visibility:hidden;}"],animation.h),TrackWrapper=styled_components_browser_esm.Ay.div.withConfig({displayName:"style__TrackWrapper",componentId:"sc-14flfup-1"})(["position:relative;width:100%;cursor:pointer;display:flex;align-items:center;height:","px;[data-disabled='true'] &&{cursor:auto;pointer-events:none;}",";"],(({$dimension})=>"s"===$dimension?20:24),(({$skeleton})=>$skeleton&&skeletonMixin)),Track=styled_components_browser_esm.Ay.div.withConfig({displayName:"style__Track",componentId:"sc-14flfup-2"})(["height:2px;background:",";[data-disabled='true'] &&{background:",";}width:100%;"],(({theme})=>theme.color["Neutral/Neutral 20"]),(({theme})=>theme.color["Neutral/Neutral 20"])),DefaultTrack=styled_components_browser_esm.Ay.div.withConfig({displayName:"style__DefaultTrack",componentId:"sc-14flfup-3"})(["height:2px;transform:translateY(-50%);"]),FilledTrack=styled_components_browser_esm.Ay.div.withConfig({displayName:"style__FilledTrack",componentId:"sc-14flfup-4"})(["display:block;[data-disabled='true'] &&{background:",";}position:absolute;height:2px;background-color:",";transition:left ",",right ",";"],(({theme})=>theme.color["Neutral/Neutral 30"]),(({theme})=>theme.color["Primary/Primary 60 Main"]),(({$animation})=>$animation?"ease-in 0.3s":"none"),(({$animation})=>$animation?"ease-in 0.3s":"none")),Thumb=styled_components_browser_esm.Ay.div.withConfig({displayName:"style__Thumb",componentId:"sc-14flfup-5"})(["position:absolute;width:","px;height:","px;align-items:center;justify-content:center;transform:translateX(-50%) translateY(-50%);border-radius:50%;top:2px;transition:left ",";"],(({$dimension})=>"s"===$dimension?16:20),(({$dimension})=>"s"===$dimension?16:20),(({$animation})=>$animation?"ease-in 0.3s":"none")),ThumbCircle=styled_components_browser_esm.Ay.div.withConfig({displayName:"style__ThumbCircle",componentId:"sc-14flfup-6"})(["position:relative;width:","px;height:","px;background:",";border-radius:50%;&:before{position:absolute;content:'';width:","px;height:","px;background:",";top:","px;bottom:","px;right:","px;left:","px;border-radius:50%;}&:hover{background:",";}"," [data-disabled='true'] &&{background:",";pointer-events:none;}"],(({$dimension})=>"s"===$dimension?16:20),(({$dimension})=>"s"===$dimension?16:20),(({theme})=>theme.color["Primary/Primary 60 Main"]),(({$dimension})=>"s"===$dimension?6:8),(({$dimension})=>"s"===$dimension?6:8),(({theme})=>theme.color["Special/Static White"]),(({$dimension})=>"s"===$dimension?5:6),(({$dimension})=>"s"===$dimension?5:6),(({$dimension})=>"s"===$dimension?5:6),(({$dimension})=>"s"===$dimension?5:6),(({theme})=>theme.color["Primary/Primary 70"]),(({$active,theme})=>$active&&`background: ${theme.color["Primary/Primary 70"]};`),(({theme})=>theme.color["Neutral/Neutral 30"]));var jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const Range=({minValue=0,maxValue=20,value:userValue,onChange,onRangeMouseUp,disabled=!1,step=1,dimension="m",skeleton=!1,...props})=>{const value=Array.isArray(userValue)&&2===userValue.length&&"number"==typeof userValue[0]&&"number"==typeof userValue[1]?sortNum(userValue):[minValue,maxValue],[isDraging,setDrag]=(0,react.useState)(!1),[isDraging2,setDrag2]=(0,react.useState)(!1),[animation,setAnimation]=(0,react.useState)(!0),[rangeWidth,setRangeWidth]=(0,react.useState)(0),filledRef=(0,react.useRef)(null),trackRef=(0,react.useRef)(null),sliderRef=(0,react.useRef)(null),slider2Ref=(0,react.useRef)(null);(0,react.useLayoutEffect)((()=>{let newValue=value;if(step&&"any"!==step){if(newValue=[Math.round(newValue[0]/step)*step,Math.round(newValue[1]/step)*step],step.toString().includes(".")){const decimal=step.toString().match(/\.(\d+)/)?.[1].length;newValue=[+newValue[0].toFixed(decimal),+newValue[1].toFixed(decimal)]}}!function correctSliderPosition(value){const slider1Coords=calcSliderCoords(value[0],minValue,maxValue,rangeWidth),slider2Coords=calcSliderCoords(value[1],minValue,maxValue,rangeWidth);sliderRef.current&&slider2Ref.current&&filledRef.current&&(sliderRef.current.style.left=`${slider1Coords}%`,slider2Ref.current.style.left=`${slider2Coords}%`,filledRef.current.style.left=`${slider1Coords}%`,filledRef.current.style.right=100-slider2Coords+"%")}(value)}),[value,rangeWidth,minValue,maxValue,step]),(0,react.useLayoutEffect)((()=>{if(trackRef.current){const resizeObserver=new ResizeObserver((entries=>{entries.forEach((entry=>setRangeWidth(entry.contentRect.width||0)))}));return resizeObserver.observe(trackRef.current),()=>{resizeObserver.disconnect()}}}),[setRangeWidth]);const[moveListener,freeResources]=(0,throttle.n)((e=>{updateSlider(e)}),50);(0,react.useEffect)((()=>(!isDraging&&!isDraging2||disabled||(document.addEventListener("mousemove",moveListener),document.addEventListener("mouseup",handleSliderMouseUp),document.addEventListener("touchmove",moveListener),document.addEventListener("touchend",handleSliderMouseUp),document.addEventListener("touchcancel",handleSliderMouseUp)),()=>{freeResources(),document.removeEventListener("mousemove",moveListener),document.removeEventListener("mouseup",handleSliderMouseUp),document.removeEventListener("touchmove",moveListener),document.removeEventListener("touchend",handleSliderMouseUp),document.removeEventListener("touchcancel",handleSliderMouseUp)})));const updateSlider=e=>{if(setAnimation(!1),isDraging||isDraging2){const calcVal=calcValue(e,trackRef,minValue,maxValue,step);if(isDraging&&calcVal>value[1]){const newValue=[value[1],calcVal];setDrag(!1),setDrag2(!0),arraysEqual(sortNum(newValue),value)||onChange(e,sortNum(newValue))}else if(isDraging2&&calcVal<value[0]){const newValue=[calcVal,value[0]];setDrag(!0),setDrag2(!1),arraysEqual(sortNum(newValue),value)||onChange(e,sortNum(newValue))}else{const newValue=isDraging?[calcVal,value[1]]:[value[0],calcVal];arraysEqual(sortNum(newValue),value)||onChange(e,sortNum(newValue))}}},onSliderClick=(e,slider)=>{"first"===slider?setDrag(!0):setDrag2(!0),setAnimation(!0)},handleSliderMouseUp=e=>{const calcVal=calcValue(e,trackRef,minValue,maxValue,step);if(onRangeMouseUp?.(),isDraging&&calcVal>value[1]){const newValue=[value[1],calcVal];arraysEqual(sortNum(newValue),value)||onChange(e,sortNum(newValue))}if(isDraging2&&calcVal<value[0]){const newValue=[calcVal,value[0]];arraysEqual(sortNum(newValue),value)||onChange(e,sortNum(newValue))}else{const newValue=isDraging?[calcVal,value[1]]:[value[0],calcVal];arraysEqual(sortNum(newValue),value)||onChange(e,sortNum(newValue))}setAnimation(!0),setDrag(!1),setDrag2(!1)},onTrackClick=e=>{const calcVal=calcValue(e,trackRef,minValue,maxValue,step);if(Math.abs(value[1]-calcVal)<Math.abs(calcVal-value[0]))arraysEqual(sortNum([value[0],calcVal]),value)||onChange(e,sortNum([value[0],calcVal])),onSliderClick(0,"second");else if(Math.abs(value[1]-calcVal)>Math.abs(calcVal-value[0]))arraysEqual(sortNum([calcVal,value[1]]),value)||onChange(e,sortNum([calcVal,value[1]])),onSliderClick(0,"first");else if(Math.abs(value[1]-calcVal)===Math.abs(calcVal-value[0])){const slider=value[0]===value[1]?calcVal<value[0]?"first":"second":"first",newValue="first"===slider?[calcVal,value[1]]:[value[0],calcVal];arraysEqual(sortNum(newValue),value)||onChange(e,sortNum(newValue)),onSliderClick(0,slider)}};return(0,jsx_runtime.jsx)(Wrapper,{"data-disabled":disabled,...props,children:(0,jsx_runtime.jsx)(TrackWrapper,{$dimension:dimension,$skeleton:skeleton,onTouchStart:onTrackClick,onMouseDown:onTrackClick,children:(0,jsx_runtime.jsxs)(Track,{children:[(0,jsx_runtime.jsx)(FilledTrack,{ref:filledRef,$animation:animation}),(0,jsx_runtime.jsxs)(DefaultTrack,{ref:trackRef,children:[(0,jsx_runtime.jsx)(Thumb,{ref:sliderRef,$animation:animation,$dimension:dimension,children:(0,jsx_runtime.jsx)(ThumbCircle,{$dimension:dimension,onTouchStart:e=>{e.stopPropagation(),props.onTouchStart?.(e),onSliderClick(0,"first")},onMouseDown:e=>{e.stopPropagation(),props.onMouseDown?.(e),onSliderClick(0,"first")},$active:isDraging})}),(0,jsx_runtime.jsx)(Thumb,{ref:slider2Ref,$animation:animation,$dimension:dimension,children:(0,jsx_runtime.jsx)(ThumbCircle,{$dimension:dimension,onTouchStart:e=>{e.stopPropagation(),props.onTouchStart?.(e),onSliderClick(0,"second")},onMouseDown:e=>{e.stopPropagation(),props.onMouseDown?.(e),onSliderClick(0,"second")},$active:isDraging2})})]})]})})})};Range.displayName="Range",Range.displayName="Range";try{Range.displayName="Range",Range.__docgenInfo={description:"",displayName:"Range",props:{value:{defaultValue:null,description:"Значение компонента",name:"value",required:!0,type:{name:"NumberRange"}},onChange:{defaultValue:null,description:"Коллбек на изменение состояния",name:"onChange",required:!0,type:{name:"(event: any, value: NumberRange) => void"}},onRangeMouseUp:{defaultValue:null,description:"Колбек, который срабатывает по окончании изменения значения (по окончании перетаскивания ползунка или клика на полосу диапазона)",name:"onRangeMouseUp",required:!1,type:{name:"(() => void)"}},minValue:{defaultValue:{value:"0"},description:"Минимальное значение",name:"minValue",required:!1,type:{name:"number"}},maxValue:{defaultValue:{value:"20"},description:"Максимальное значение",name:"maxValue",required:!1,type:{name:"number"}},step:{defaultValue:{value:"1"},description:"Шаг слайдера. Это либо строка any, либо положительное число, по умолчанию 1.\nЕсли этот параметр не установлен в any, компонент принимает только кратные step значения, в диапазоне minValue - maxValue",name:"step",required:!1,type:{name:'number | "any"'}},disabled:{defaultValue:{value:"false"},description:"Отключение компонента",name:"disabled",required:!1,type:{name:"boolean"}},dimension:{defaultValue:{value:"m"},description:"Размер компонента",name:"dimension",required:!1,type:{name:"enum",value:[{value:'"s"'},{value:'"m"'}]}},skeleton:{defaultValue:{value:"false"},description:"Состояние skeleton",name:"skeleton",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Range/index.tsx#Range"]={docgenInfo:Range.__docgenInfo,name:"Range",path:"src/components/Range/index.tsx#Range"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/common/utils/throttle.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{n:()=>throttle});const throttle=(fn,delay)=>{let timeout,wait=!1,cancelled=!1;return[(...args)=>{if(cancelled)return;if(wait)return;const val=fn(...args);return wait=!0,timeout=window.setTimeout((()=>{wait=!1}),delay),val},()=>{cancelled=!0,clearTimeout(timeout)}]}},"./src/components/skeleton/animation.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{h:()=>skeletonAnimationMixin});var styled_components__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js");const skeletonAnimation=props=>(0,styled_components__WEBPACK_IMPORTED_MODULE_0__.i7)(["0%{background-color:",";border-color:",";}50%{background-color:",";border-color:",";}100%{background-color:",";border-color:",";}"],props.theme.color["Neutral/Neutral 10"],props.theme.color["Neutral/Neutral 10"],props.theme.color["Neutral/Neutral 20"],props.theme.color["Neutral/Neutral 20"],props.theme.color["Neutral/Neutral 10"],props.theme.color["Neutral/Neutral 10"]),skeletonAnimationMixin=(0,styled_components__WEBPACK_IMPORTED_MODULE_0__.AH)(["animation:"," 2s ease infinite;"],(props=>skeletonAnimation(props)));try{skeletonAnimation.displayName="skeletonAnimation",skeletonAnimation.__docgenInfo={description:"",displayName:"skeletonAnimation",props:{as:{defaultValue:null,description:'Dynamically adjust the rendered component or HTML tag, e.g.\n```\nconst StyledButton = styled.button``\n\n<StyledButton as="a" href="/foo">\n  I\'m an anchor now\n</StyledButton>\n```',name:"as",required:!1,type:{name:"KnownTarget"}},forwardedAs:{defaultValue:null,description:"",name:"forwardedAs",required:!1,type:{name:"KnownTarget"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/skeleton/animation.tsx#skeletonAnimation"]={docgenInfo:skeletonAnimation.__docgenInfo,name:"skeletonAnimation",path:"src/components/skeleton/animation.tsx#skeletonAnimation"})}catch(__react_docgen_typescript_loader_error){}}}]);