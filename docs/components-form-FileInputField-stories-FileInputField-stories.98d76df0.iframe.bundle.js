"use strict";(self.webpackChunk_admiral_ds_react_ui=self.webpackChunk_admiral_ds_react_ui||[]).push([[4989],{"./src/components/form/FileInputField/stories/FileInputField.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{FileInputFieldBase:()=>FileInputFieldBase,FileInputFieldRequired:()=>FileInputFieldRequired,__namedExportsOrder:()=>__namedExportsOrder,default:()=>FileInputField_stories});var react=__webpack_require__("./node_modules/react/index.js"),uid=__webpack_require__("./src/components/common/uid.ts"),refSetter=__webpack_require__("./src/components/common/utils/refSetter.ts"),Field=__webpack_require__("./src/components/Field/index.tsx"),FileInput=__webpack_require__("./src/components/input/FileInput/index.tsx"),splitDataAttributes=__webpack_require__("./src/components/common/utils/splitDataAttributes.ts"),styled_components_browser_esm=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const FileInputField_Field=(0,styled_components_browser_esm.default)(Field.gN).withConfig({displayName:"FileInputField__Field",componentId:"sc-16d5izg-0"})(["& ","{padding-top:20px;}"],Field.bP),FileInputField=react.forwardRef(((props,ref)=>{const inputRef=react.useRef(null),{className,maxLength,displayInline,status,required,extraText,label,id=(0,uid.h)(),disabled,displayCharacterCounter,skeleton,...restProps}=props,fieldContainerProps={className,extraText,status,required,label,id,displayInline,disabled,maxLength,inputRef,displayCharacterCounter,skeleton,"data-field-id":id,"data-field-name":restProps.name};(0,splitDataAttributes.$l)(restProps,fieldContainerProps),(0,splitDataAttributes.Od)(restProps,fieldContainerProps);const inputProps={ref:(0,refSetter.O)(ref,inputRef),id,"aria-required":required,status,disabled,maxLength,skeleton,...restProps};return(0,jsx_runtime.jsx)(FileInputField_Field,{...fieldContainerProps,children:(0,jsx_runtime.jsx)(FileInput.S2,{...inputProps})})}));FileInputField.displayName="FileInputField";try{FileInputField.displayName="FileInputField",FileInputField.__docgenInfo={description:"",displayName:"FileInputField",props:{title:{defaultValue:null,description:"Текстовое описание компонента (текст внутри области загрузки файлов).\nЕсли к компоненту также нужно добавить label, используйте компонент FileInputField и его проп label",name:"title",required:!1,type:{name:"ReactNode"}},dimension:{defaultValue:null,description:"Размер компонента",name:"dimension",required:!0,type:{name:"enum",value:[{value:'"m"'},{value:'"xl"'}]}},status:{defaultValue:null,description:"Установка статуса поля",name:"status",required:!1,type:{name:"enum",value:[{value:'"success"'},{value:'"error"'}]}},width:{defaultValue:null,description:"Задает ширину",name:"width",required:!1,type:{name:"string | number"}},description:{defaultValue:null,description:"@deprecated Используйте взамен проп title\nТекст для кнопки при dimension M",name:"description",required:!1,type:{name:"ReactNode"}},renderCustomFileInput:{defaultValue:null,description:'Функция, возвращающая компонент, на который нужно "повесить" файловый инпут',name:"renderCustomFileInput",required:!1,type:{name:"((option: RenderFileInputProps) => ReactNode)"}},files:{defaultValue:null,description:"Список файлов для синхронизации с нативным инпутом",name:"files",required:!1,type:{name:"File[]"}},label:{defaultValue:null,description:"Имя поля формы",name:"label",required:!1,type:{name:"ReactNode"}},extraText:{defaultValue:null,description:"Текст будет виден ниже компонента",name:"extraText",required:!1,type:{name:"ReactNode"}},skeleton:{defaultValue:null,description:"Состояние skeleton",name:"skeleton",required:!1,type:{name:"boolean"}},displayInline:{defaultValue:null,description:"Отображать лейбл в одну строчку с инпутом",name:"displayInline",required:!1,type:{name:"boolean"}},displayCharacterCounter:{defaultValue:null,description:"Позволяет отключать появление счетчика символов при задании maxLength",name:"displayCharacterCounter",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/form/FileInputField/index.tsx#FileInputField"]={docgenInfo:FileInputField.__docgenInfo,name:"FileInputField",path:"src/components/form/FileInputField/index.tsx#FileInputField"})}catch(__react_docgen_typescript_loader_error){}var borderRadius=__webpack_require__("./src/components/themes/borderRadius.ts"),common=__webpack_require__("./src/components/form/common.tsx"),FileItem=__webpack_require__("./src/components/input/FileInput/FileItem.tsx"),style=__webpack_require__("./src/components/input/FileInput/style.ts");const FileInputFieldBaseTemplate=({dimension="xl",label="Label",...props})=>{const inputRef=react.useRef(null),[fileList,setFileList]=react.useState([]),[fileAttributesMap,setFileAttributesMap]=react.useState(new Map),[status,setStatus]=react.useState(void 0),[extraText,setExtraText]=react.useState(void 0),filesAreEqual=(file1,file2)=>file1.name===file2.name&&file1.size===file2.size&&file1.type===file2.type&&file1.lastModified===file2.lastModified,accept=["image/*",".pdf","application/json"];return(0,jsx_runtime.jsx)(styled_components_browser_esm.ThemeProvider,{theme:function swapBorder(theme){return theme.shape.borderRadiusKind=props.themeBorderKind||theme.shape.borderRadiusKind,theme},children:(0,jsx_runtime.jsx)("div",{style:{width:"480px"},children:(0,jsx_runtime.jsx)(FileInputField,{...props,dimension,disabled:props.disabled,title:"xl"===dimension?`Загрузите не более 3-х файлов типа ${accept.join(", ")}`:"Добавьте файлы",ref:inputRef,onInput:e=>{const userSelectedFileList=Array.from(e.target.files||[]),updatedFileAttributesMap=new Map(fileAttributesMap),updatedFileList=fileList.reduce(((acc,file)=>(-1===userSelectedFileList.findIndex((userFile=>filesAreEqual(userFile,file)))?acc.push(file):updatedFileAttributesMap.delete(file),acc)),[]);userSelectedFileList.length+updatedFileList.length>3?(userSelectedFileList.splice(3-updatedFileList.length),setStatus("error"),setExtraText("Несколько файлов не было загружено, так как превышен лимит количества загружаемых файлов")):(setStatus(void 0),setExtraText(void 0)),userSelectedFileList.forEach((file=>{const imageURL=file.type.startsWith("image")?URL.createObjectURL(file):void 0,onPreviewIconClick=file.type.startsWith("image")?()=>(file=>{console.log(`Preview icon on file "${file.name}" was clicked`)})(file):void 0;updatedFileAttributesMap.set(file,{fileId:(0,uid.h)(),fileName:file.name.substring(0,file.name.lastIndexOf(".")),fileType:file.type,fileSize:file.size,status:"Uploaded",errorMessage:"Что-то явно пошло не так...",previewImageURL:imageURL,onPreviewIconClick})})),setFileList([...updatedFileList,...userSelectedFileList]),setFileAttributesMap(updatedFileAttributesMap)},accept:accept.join(", "),files:fileList,status,extraText,label,children:fileList.map((file=>{const attributes=fileAttributesMap.get(file);if(attributes)return(0,jsx_runtime.jsx)(FileItem.j,{fileId:attributes.fileId,fileName:attributes.fileName,fileType:attributes.fileType,fileSize:attributes.fileSize,status:attributes.status,errorMessage:attributes.errorMessage,previewImageURL:attributes.previewImageURL,onCloseIconClick:()=>(fileToRemove=>{const updatedFileList=fileList.filter((file=>!filesAreEqual(file,fileToRemove))),updatedFileAttributesMap=new Map(fileAttributesMap),attributes=fileAttributesMap.get(fileToRemove);attributes&&attributes.previewImageURL&&URL.revokeObjectURL(attributes.previewImageURL),updatedFileAttributesMap.delete(fileToRemove),setFileList(updatedFileList),setFileAttributesMap(updatedFileAttributesMap),setStatus(void 0),setExtraText(void 0)})(file),onPreviewIconClick:attributes.onPreviewIconClick,dimension,filesLayoutCssMixin:"xl"===dimension?style.F$:style.qr},attributes.fileId)}))})})})};FileInputFieldBaseTemplate.displayName="FileInputFieldBaseTemplate";try{FileInputFieldBaseTemplate.displayName="FileInputFieldBaseTemplate",FileInputFieldBaseTemplate.__docgenInfo={description:"",displayName:"FileInputFieldBaseTemplate",props:{title:{defaultValue:null,description:"Текстовое описание компонента (текст внутри области загрузки файлов).\nЕсли к компоненту также нужно добавить label, используйте компонент FileInputField и его проп label",name:"title",required:!1,type:{name:"ReactNode"}},dimension:{defaultValue:{value:"xl"},description:"Размер компонента",name:"dimension",required:!1,type:{name:"enum",value:[{value:'"m"'},{value:'"xl"'}]}},status:{defaultValue:null,description:"Установка статуса поля",name:"status",required:!1,type:{name:"enum",value:[{value:'"success"'},{value:'"error"'}]}},width:{defaultValue:null,description:"Задает ширину",name:"width",required:!1,type:{name:"string | number"}},description:{defaultValue:null,description:"@deprecated Используйте взамен проп title\nТекст для кнопки при dimension M",name:"description",required:!1,type:{name:"ReactNode"}},renderCustomFileInput:{defaultValue:null,description:'Функция, возвращающая компонент, на который нужно "повесить" файловый инпут',name:"renderCustomFileInput",required:!1,type:{name:"((option: RenderFileInputProps) => ReactNode)"}},files:{defaultValue:null,description:"Список файлов для синхронизации с нативным инпутом",name:"files",required:!1,type:{name:"File[]"}},label:{defaultValue:{value:"Label"},description:"Имя поля формы",name:"label",required:!1,type:{name:"ReactNode"}},extraText:{defaultValue:null,description:"Текст будет виден ниже компонента",name:"extraText",required:!1,type:{name:"ReactNode"}},skeleton:{defaultValue:null,description:"Состояние skeleton",name:"skeleton",required:!1,type:{name:"boolean"}},displayInline:{defaultValue:null,description:"Отображать лейбл в одну строчку с инпутом",name:"displayInline",required:!1,type:{name:"boolean"}},displayCharacterCounter:{defaultValue:null,description:"Позволяет отключать появление счетчика символов при задании maxLength",name:"displayCharacterCounter",required:!1,type:{name:"boolean"}},themeBorderKind:{defaultValue:null,description:"",name:"themeBorderKind",required:!1,type:{name:"enum",value:[{value:'"Border radius 0"'},{value:'"Border radius 2"'},{value:'"Border radius 4"'},{value:'"Border radius 6"'},{value:'"Border radius 8"'},{value:'"Border radius 10"'}]}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/form/FileInputField/stories/FileInputFieldBase.template.tsx#FileInputFieldBaseTemplate"]={docgenInfo:FileInputFieldBaseTemplate.__docgenInfo,name:"FileInputFieldBaseTemplate",path:"src/components/form/FileInputField/stories/FileInputFieldBase.template.tsx#FileInputFieldBaseTemplate"})}catch(__react_docgen_typescript_loader_error){}const FileInputFieldRequiredTemplate=({dimension="xl",label="Обязательно для заполнения",required=!0,...props})=>{const inputRef=react.useRef(null),[fileList,setFileList]=react.useState([]),[fileAttributesMap,setFileAttributesMap]=react.useState(new Map),[status,setStatus]=react.useState(void 0),[extraText,setExtraText]=react.useState(void 0),filesAreEqual=(file1,file2)=>file1.name===file2.name&&file1.size===file2.size&&file1.type===file2.type&&file1.lastModified===file2.lastModified,accept=["image/*",".pdf","application/json"];return(0,jsx_runtime.jsx)(styled_components_browser_esm.ThemeProvider,{theme:function swapBorder(theme){return theme.shape.borderRadiusKind=props.themeBorderKind||theme.shape.borderRadiusKind,theme},children:(0,jsx_runtime.jsx)("div",{style:{width:"480px"},children:(0,jsx_runtime.jsx)(FileInputField,{...props,dimension,disabled:props.disabled,title:"xl"===dimension?`Загрузите не более 3-х файлов типа ${accept.join(", ")}`:"Добавьте файлы",ref:inputRef,onInput:e=>{const userSelectedFileList=Array.from(e.target.files||[]),updatedFileAttributesMap=new Map(fileAttributesMap),updatedFileList=fileList.reduce(((acc,file)=>(-1===userSelectedFileList.findIndex((userFile=>filesAreEqual(userFile,file)))?acc.push(file):updatedFileAttributesMap.delete(file),acc)),[]);userSelectedFileList.length+updatedFileList.length>3?(userSelectedFileList.splice(3-updatedFileList.length),setStatus("error"),setExtraText("Несколько файлов не было загружено, так как превышен лимит количества загружаемых файлов")):(setStatus(void 0),setExtraText(void 0)),userSelectedFileList.forEach((file=>{const imageURL=file.type.startsWith("image")?URL.createObjectURL(file):void 0,onPreviewIconClick=file.type.startsWith("image")?()=>(file=>{console.log(`Preview icon on file "${file.name}" was clicked`)})(file):void 0;updatedFileAttributesMap.set(file,{fileId:(0,uid.h)(),fileName:file.name.substring(0,file.name.lastIndexOf(".")),fileType:file.type,fileSize:file.size,status:"Uploaded",errorMessage:"Что-то явно пошло не так...",previewImageURL:imageURL,onPreviewIconClick})})),setFileList([...updatedFileList,...userSelectedFileList]),setFileAttributesMap(updatedFileAttributesMap)},accept:accept.join(", "),files:fileList,status,extraText,label,required,children:fileList.map((file=>{const attributes=fileAttributesMap.get(file);if(attributes)return(0,jsx_runtime.jsx)(FileItem.j,{fileId:attributes.fileId,fileName:attributes.fileName,fileType:attributes.fileType,fileSize:attributes.fileSize,status:attributes.status,errorMessage:attributes.errorMessage,previewImageURL:attributes.previewImageURL,onCloseIconClick:()=>(fileToRemove=>{const updatedFileList=fileList.filter((file=>!filesAreEqual(file,fileToRemove))),updatedFileAttributesMap=new Map(fileAttributesMap),attributes=fileAttributesMap.get(fileToRemove);attributes&&attributes.previewImageURL&&URL.revokeObjectURL(attributes.previewImageURL),updatedFileAttributesMap.delete(fileToRemove),setFileList(updatedFileList),setFileAttributesMap(updatedFileAttributesMap),setStatus(void 0),setExtraText(void 0)})(file),onPreviewIconClick:attributes.onPreviewIconClick,dimension,filesLayoutCssMixin:"xl"===dimension?style.F$:style.qr},attributes.fileId)}))})})})};FileInputFieldRequiredTemplate.displayName="FileInputFieldRequiredTemplate";try{FileInputFieldRequiredTemplate.displayName="FileInputFieldRequiredTemplate",FileInputFieldRequiredTemplate.__docgenInfo={description:"",displayName:"FileInputFieldRequiredTemplate",props:{title:{defaultValue:null,description:"Текстовое описание компонента (текст внутри области загрузки файлов).\nЕсли к компоненту также нужно добавить label, используйте компонент FileInputField и его проп label",name:"title",required:!1,type:{name:"ReactNode"}},dimension:{defaultValue:{value:"xl"},description:"Размер компонента",name:"dimension",required:!1,type:{name:"enum",value:[{value:'"m"'},{value:'"xl"'}]}},status:{defaultValue:null,description:"Установка статуса поля",name:"status",required:!1,type:{name:"enum",value:[{value:'"success"'},{value:'"error"'}]}},width:{defaultValue:null,description:"Задает ширину",name:"width",required:!1,type:{name:"string | number"}},description:{defaultValue:null,description:"@deprecated Используйте взамен проп title\nТекст для кнопки при dimension M",name:"description",required:!1,type:{name:"ReactNode"}},renderCustomFileInput:{defaultValue:null,description:'Функция, возвращающая компонент, на который нужно "повесить" файловый инпут',name:"renderCustomFileInput",required:!1,type:{name:"((option: RenderFileInputProps) => ReactNode)"}},files:{defaultValue:null,description:"Список файлов для синхронизации с нативным инпутом",name:"files",required:!1,type:{name:"File[]"}},label:{defaultValue:{value:"Обязательно для заполнения"},description:"Имя поля формы",name:"label",required:!1,type:{name:"ReactNode"}},extraText:{defaultValue:null,description:"Текст будет виден ниже компонента",name:"extraText",required:!1,type:{name:"ReactNode"}},skeleton:{defaultValue:null,description:"Состояние skeleton",name:"skeleton",required:!1,type:{name:"boolean"}},displayInline:{defaultValue:null,description:"Отображать лейбл в одну строчку с инпутом",name:"displayInline",required:!1,type:{name:"boolean"}},displayCharacterCounter:{defaultValue:null,description:"Позволяет отключать появление счетчика символов при задании maxLength",name:"displayCharacterCounter",required:!1,type:{name:"boolean"}},themeBorderKind:{defaultValue:null,description:"",name:"themeBorderKind",required:!1,type:{name:"enum",value:[{value:'"Border radius 0"'},{value:'"Border radius 2"'},{value:'"Border radius 4"'},{value:'"Border radius 6"'},{value:'"Border radius 8"'},{value:'"Border radius 10"'}]}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/form/FileInputField/stories/FileInputFieldRequired.template.tsx#FileInputFieldRequiredTemplate"]={docgenInfo:FileInputFieldRequiredTemplate.__docgenInfo,name:"FileInputFieldRequiredTemplate",path:"src/components/form/FileInputField/stories/FileInputFieldRequired.template.tsx#FileInputFieldRequiredTemplate"})}catch(__react_docgen_typescript_loader_error){}const FileInputField_stories={title:"Admiral-2.1/Form Field/FileInputField",component:FileInputField,decorators:void 0,parameters:{docs:{source:{code:null}},componentSubtitle:(0,jsx_runtime.jsx)(common.t,{}),design:[{type:"figma",url:"https://www.figma.com/file/EGEGZsx8WhdxpmFKu8J41G/Admiral-2.1-UI-Kit?node-id=39%3A27281"},{type:"figma",url:"https://www.figma.com/file/EGEGZsx8WhdxpmFKu8J41G/Admiral-2.1-UI-Kit?node-id=39%3A27389"},{type:"figma",url:"https://www.figma.com/file/EGEGZsx8WhdxpmFKu8J41G/Admiral-2.1-UI-Kit?node-id=39%3A27519"},{type:"figma",url:"https://www.figma.com/file/EGEGZsx8WhdxpmFKu8J41G/Admiral-2.1-UI-Kit?node-id=39%3A27563"}]},argTypes:{dimension:{options:["xl","m"],control:{type:"radio"}},extraText:{control:{type:"text"}},title:{control:{type:"text"}},description:{control:{type:"text"}},label:{control:{type:"text"}},themeBorderKind:{options:borderRadius.g2,control:{type:"radio"}},skeleton:{control:{type:"boolean"}},displayCharacterCounter:{control:{type:"boolean"}},displayInline:{control:{type:"boolean"}},width:{control:!1},files:{control:!1}}},FileInputFieldBaseStory=props=>(0,jsx_runtime.jsx)(FileInputFieldBaseTemplate,{...props,dimension:"xl"});FileInputFieldBaseStory.displayName="FileInputFieldBaseStory";const FileInputFieldBase={render:FileInputFieldBaseStory,parameters:{docs:{source:{code:"import * as React from 'react';\nimport { ThemeProvider } from 'styled-components';\n\nimport { FileInputField, FileItem, fullWidthPositionMixin, halfWidthPositionMixin } from '@admiral-ds/react-ui';\nimport type {\n  FileAttributeProps,\n  FileInputFieldProps,\n  InputStatus,\n  Theme,\n  BorderRadiusType,\n} from '@admiral-ds/react-ui';\n\nimport { uid } from '#src/components/common/uid';\n\nexport const FileInputFieldBaseTemplate = ({\n  dimension = 'xl',\n  label = 'Label',\n  ...props\n}: FileInputFieldProps & { themeBorderKind?: BorderRadiusType }) => {\n  function swapBorder(theme: Theme): Theme {\n    theme.shape.borderRadiusKind = props.themeBorderKind || theme.shape.borderRadiusKind;\n    return theme;\n  }\n\n  const inputRef = React.useRef<HTMLInputElement>(null);\n  const [fileList, setFileList] = React.useState<File[]>([]);\n  const [fileAttributesMap, setFileAttributesMap] = React.useState(new Map<File, FileAttributeProps>());\n  const [status, setStatus] = React.useState<InputStatus | undefined>(undefined);\n  const [extraText, setExtraText] = React.useState<React.ReactNode | undefined>(undefined);\n\n  const filesAreEqual = (file1: File, file2: File) =>\n    file1.name === file2.name &&\n    file1.size === file2.size &&\n    file1.type === file2.type &&\n    file1.lastModified === file2.lastModified;\n\n  const accept = ['image/*', '.pdf', 'application/json'];\n  const maxFilesNumber = 3;\n\n  const handlePreviewIconClick = (file: File) => {\n    console.log(`Preview icon on file \"${file.name}\" was clicked`);\n  };\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const userSelectedFileList = Array.from(e.target.files || []);\n    const updatedFileAttributesMap = new Map<File, FileAttributeProps>(fileAttributesMap);\n    const updatedFileList = fileList.reduce((acc: File[], file) => {\n      if (userSelectedFileList.findIndex((userFile) => filesAreEqual(userFile, file)) === -1) {\n        acc.push(file);\n      } else {\n        updatedFileAttributesMap.delete(file);\n      }\n      return acc;\n    }, []);\n    if (userSelectedFileList.length + updatedFileList.length > maxFilesNumber) {\n      userSelectedFileList.splice(maxFilesNumber - updatedFileList.length);\n      setStatus('error');\n      setExtraText('Несколько файлов не было загружено, так как превышен лимит количества загружаемых файлов');\n    } else {\n      setStatus(undefined);\n      setExtraText(undefined);\n    }\n    userSelectedFileList.forEach((file) => {\n      const imageURL = file.type.startsWith('image') ? URL.createObjectURL(file) : undefined;\n      const onPreviewIconClick = file.type.startsWith('image') ? () => handlePreviewIconClick(file) : undefined;\n      updatedFileAttributesMap.set(file, {\n        fileId: uid(),\n        fileName: file.name.substring(0, file.name.lastIndexOf('.')),\n        fileType: file.type,\n        fileSize: file.size,\n        status: 'Uploaded',\n        errorMessage: 'Что-то явно пошло не так...',\n        previewImageURL: imageURL,\n        onPreviewIconClick: onPreviewIconClick,\n      });\n    });\n    setFileList([...updatedFileList, ...userSelectedFileList]);\n    setFileAttributesMap(updatedFileAttributesMap);\n  };\n\n  const handleRemoveFile = (fileToRemove: File) => {\n    const updatedFileList = fileList.filter((file) => !filesAreEqual(file, fileToRemove));\n    const updatedFileAttributesMap = new Map<File, FileAttributeProps>(fileAttributesMap);\n    const attributes = fileAttributesMap.get(fileToRemove);\n    if (attributes && attributes.previewImageURL) {\n      URL.revokeObjectURL(attributes.previewImageURL);\n    }\n    updatedFileAttributesMap.delete(fileToRemove);\n    setFileList(updatedFileList);\n    setFileAttributesMap(updatedFileAttributesMap);\n    setStatus(undefined);\n    setExtraText(undefined);\n  };\n\n  const renderFileList = () => {\n    return fileList.map((file) => {\n      const attributes = fileAttributesMap.get(file);\n      if (attributes) {\n        return (\n          <FileItem\n            fileId={attributes.fileId}\n            key={attributes.fileId}\n            fileName={attributes.fileName}\n            fileType={attributes.fileType}\n            fileSize={attributes.fileSize}\n            status={attributes.status}\n            errorMessage={attributes.errorMessage}\n            previewImageURL={attributes.previewImageURL}\n            onCloseIconClick={() => handleRemoveFile(file)}\n            onPreviewIconClick={attributes.onPreviewIconClick}\n            dimension={dimension}\n            filesLayoutCssMixin={dimension === 'xl' ? halfWidthPositionMixin : fullWidthPositionMixin}\n          />\n        );\n      }\n    });\n  };\n\n  return (\n    <ThemeProvider theme={swapBorder}>\n      <div style={{ width: '480px' }}>\n        <FileInputField\n          {...props}\n          dimension={dimension}\n          disabled={props.disabled}\n          title={dimension === 'xl' ? `Загрузите не более 3-х файлов типа ${accept.join(', ')}` : 'Добавьте файлы'}\n          ref={inputRef}\n          onInput={handleChange}\n          accept={accept.join(', ')}\n          files={fileList}\n          status={status}\n          extraText={extraText}\n          label={label}\n        >\n          {renderFileList()}\n        </FileInputField>\n      </div>\n    </ThemeProvider>\n  );\n};\n"}}},name:"FileInputField. Example"},FileInputFieldRequiredStory=props=>(0,jsx_runtime.jsx)(FileInputFieldRequiredTemplate,{...props,dimension:"xl"});FileInputFieldRequiredStory.displayName="FileInputFieldRequiredStory";const FileInputFieldRequired={render:FileInputFieldRequiredStory,parameters:{docs:{source:{code:"import * as React from 'react';\nimport { ThemeProvider } from 'styled-components';\n\nimport { FileInputField, FileItem, fullWidthPositionMixin, halfWidthPositionMixin } from '@admiral-ds/react-ui';\nimport type {\n  FileAttributeProps,\n  FileInputFieldProps,\n  InputStatus,\n  Theme,\n  BorderRadiusType,\n} from '@admiral-ds/react-ui';\n\nimport { uid } from '#src/components/common/uid';\n\nexport const FileInputFieldRequiredTemplate = ({\n  dimension = 'xl',\n  label = 'Обязательно для заполнения',\n  required = true,\n  ...props\n}: FileInputFieldProps & { themeBorderKind?: BorderRadiusType }) => {\n  function swapBorder(theme: Theme): Theme {\n    theme.shape.borderRadiusKind = props.themeBorderKind || theme.shape.borderRadiusKind;\n    return theme;\n  }\n\n  const inputRef = React.useRef<HTMLInputElement>(null);\n  const [fileList, setFileList] = React.useState<File[]>([]);\n  const [fileAttributesMap, setFileAttributesMap] = React.useState(new Map<File, FileAttributeProps>());\n  const [status, setStatus] = React.useState<InputStatus | undefined>(undefined);\n  const [extraText, setExtraText] = React.useState<React.ReactNode | undefined>(undefined);\n\n  const filesAreEqual = (file1: File, file2: File) =>\n    file1.name === file2.name &&\n    file1.size === file2.size &&\n    file1.type === file2.type &&\n    file1.lastModified === file2.lastModified;\n\n  const accept = ['image/*', '.pdf', 'application/json'];\n  const maxFilesNumber = 3;\n\n  const handlePreviewIconClick = (file: File) => {\n    console.log(`Preview icon on file \"${file.name}\" was clicked`);\n  };\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const userSelectedFileList = Array.from(e.target.files || []);\n    const updatedFileAttributesMap = new Map<File, FileAttributeProps>(fileAttributesMap);\n    const updatedFileList = fileList.reduce((acc: File[], file) => {\n      if (userSelectedFileList.findIndex((userFile) => filesAreEqual(userFile, file)) === -1) {\n        acc.push(file);\n      } else {\n        updatedFileAttributesMap.delete(file);\n      }\n      return acc;\n    }, []);\n    if (userSelectedFileList.length + updatedFileList.length > maxFilesNumber) {\n      userSelectedFileList.splice(maxFilesNumber - updatedFileList.length);\n      setStatus('error');\n      setExtraText('Несколько файлов не было загружено, так как превышен лимит количества загружаемых файлов');\n    } else {\n      setStatus(undefined);\n      setExtraText(undefined);\n    }\n    userSelectedFileList.forEach((file) => {\n      const imageURL = file.type.startsWith('image') ? URL.createObjectURL(file) : undefined;\n      const onPreviewIconClick = file.type.startsWith('image') ? () => handlePreviewIconClick(file) : undefined;\n      updatedFileAttributesMap.set(file, {\n        fileId: uid(),\n        fileName: file.name.substring(0, file.name.lastIndexOf('.')),\n        fileType: file.type,\n        fileSize: file.size,\n        status: 'Uploaded',\n        errorMessage: 'Что-то явно пошло не так...',\n        previewImageURL: imageURL,\n        onPreviewIconClick: onPreviewIconClick,\n      });\n    });\n    setFileList([...updatedFileList, ...userSelectedFileList]);\n    setFileAttributesMap(updatedFileAttributesMap);\n  };\n\n  const handleRemoveFile = (fileToRemove: File) => {\n    const updatedFileList = fileList.filter((file) => !filesAreEqual(file, fileToRemove));\n    const updatedFileAttributesMap = new Map<File, FileAttributeProps>(fileAttributesMap);\n    const attributes = fileAttributesMap.get(fileToRemove);\n    if (attributes && attributes.previewImageURL) {\n      URL.revokeObjectURL(attributes.previewImageURL);\n    }\n    updatedFileAttributesMap.delete(fileToRemove);\n    setFileList(updatedFileList);\n    setFileAttributesMap(updatedFileAttributesMap);\n    setStatus(undefined);\n    setExtraText(undefined);\n  };\n\n  const renderFileList = () => {\n    return fileList.map((file) => {\n      const attributes = fileAttributesMap.get(file);\n      if (attributes) {\n        return (\n          <FileItem\n            fileId={attributes.fileId}\n            key={attributes.fileId}\n            fileName={attributes.fileName}\n            fileType={attributes.fileType}\n            fileSize={attributes.fileSize}\n            status={attributes.status}\n            errorMessage={attributes.errorMessage}\n            previewImageURL={attributes.previewImageURL}\n            onCloseIconClick={() => handleRemoveFile(file)}\n            onPreviewIconClick={attributes.onPreviewIconClick}\n            dimension={dimension}\n            filesLayoutCssMixin={dimension === 'xl' ? halfWidthPositionMixin : fullWidthPositionMixin}\n          />\n        );\n      }\n    });\n  };\n\n  return (\n    <ThemeProvider theme={swapBorder}>\n      <div style={{ width: '480px' }}>\n        <FileInputField\n          {...props}\n          dimension={dimension}\n          disabled={props.disabled}\n          title={dimension === 'xl' ? `Загрузите не более 3-х файлов типа ${accept.join(', ')}` : 'Добавьте файлы'}\n          ref={inputRef}\n          onInput={handleChange}\n          accept={accept.join(', ')}\n          files={fileList}\n          status={status}\n          extraText={extraText}\n          label={label}\n          required={required}\n        >\n          {renderFileList()}\n        </FileInputField>\n      </div>\n    </ThemeProvider>\n  );\n};\n"}}},name:"FileInputField. Required"};FileInputFieldBase.parameters={...FileInputFieldBase.parameters,docs:{...FileInputFieldBase.parameters?.docs,source:{originalSource:"{\n  render: FileInputFieldBaseStory,\n  parameters: {\n    docs: {\n      source: {\n        code: FileInputFieldBaseRaw\n      }\n    }\n  },\n  name: 'FileInputField. Example'\n}",...FileInputFieldBase.parameters?.docs?.source}}},FileInputFieldRequired.parameters={...FileInputFieldRequired.parameters,docs:{...FileInputFieldRequired.parameters?.docs,source:{originalSource:"{\n  render: FileInputFieldRequiredStory,\n  parameters: {\n    docs: {\n      source: {\n        code: FileInputFieldRequiredRaw\n      }\n    }\n  },\n  name: 'FileInputField. Required'\n}",...FileInputFieldRequired.parameters?.docs?.source}}};const __namedExportsOrder=["FileInputFieldBase","FileInputFieldRequired"]},"./src/components/common/utils/splitDataAttributes.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{$l:()=>passFormFieldDataAttributes,Od:()=>passFormFieldContainerDataAttributes,cP:()=>FORM_FIELD_DATA_CONTAINER_ATTRIBUTE,wP:()=>passDropdownDataAttributes});const FORM_FIELD_DATA_CONTAINER_ATTRIBUTE="data-container",FORM_FIELD_DATA_ATTRIBUTE="data-field",DROPDOWN_DATA_ATTRIBUTE="data-dropdown-container";function passFormFieldContainerDataAttributes(initialProps,containerProps){passDataAttributes(initialProps,containerProps,FORM_FIELD_DATA_CONTAINER_ATTRIBUTE,!0)}function passFormFieldDataAttributes(initialProps,containerProps){passDataAttributes(initialProps,containerProps,FORM_FIELD_DATA_ATTRIBUTE,!1)}function passDropdownDataAttributes(initialProps){const dropMenuProps={};return passDataAttributes(initialProps,dropMenuProps,DROPDOWN_DATA_ATTRIBUTE,!0),dropMenuProps}function passDataAttributes(sourceProps,destinationProps,dataAttributesStart,deleteProp){Object.keys(sourceProps).forEach((key=>{"string"==typeof key&&key.startsWith(dataAttributesStart)&&(destinationProps[key]=sourceProps[key],deleteProp&&delete sourceProps[key])}))}},"./src/components/form/common.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{t:()=>DataAttributesDescription});__webpack_require__("./node_modules/react/index.js");var styled_components__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),_src_components_common_utils_splitDataAttributes__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/components/common/utils/splitDataAttributes.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/jsx-runtime.js");const Desc=styled_components__WEBPACK_IMPORTED_MODULE_2__.default.div.withConfig({displayName:"common__Desc",componentId:"sc-1vhod0x-0"})(["font-family:'VTB Group UI';font-size:16px;line-height:24px;"]),DataAttributesDescription=()=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(Desc,{children:["Компоненту можно прокидывать дата аттрибуты вида [",_src_components_common_utils_splitDataAttributes__WEBPACK_IMPORTED_MODULE_3__.cP,"-...]. Этот аттрибут попадет только на контейнер самого компонента.",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("br",{}),' Например: data-container-id="fieldIdOne" - контейнер компонента получит аттрибут data-container-id="fieldIdOne", на нативный input этот аттрибут прокинут не будет.']});DataAttributesDescription.displayName="DataAttributesDescription"}}]);